<div class="inner recipe-page" ng-controller="RecipeCntl">
    <div class="main-img-container">
        <img src="http://opentaste.eu/static/recipes/{{content._id}}/{{ main_img }}" alt="" title="" class="main-img"/>
    </div>
    <h1><a href="/{{user}}/{{ content.url.en }}/">{{getTerm content 'name' lang}}</a></h1>
    <h3 class="author">
        <a href="/{{user}}/" class="author-img"><img src="http://opentaste.eu{{ content.user.image_show }}" alt="" /></a>
        <a href="/{{user}}/" class="author-name">{{ content.user.name }}</a>
    </h3>
    <!--<div class="post-date">[[ 1288323623006 | date:'medium']]</div>-->
    <h3 class="desc">{{getTerm content 'description' lang}}</h3>
    <h2>{{getTerm i18n 'ingredients' lang}}</h2>
    {{#each content.ingredients}}
        <ul class="ingredients">
            {{#each this}}
                <li>
                    {{getTerm this 'name' ../../lang}}
                    <small>
                        {{#with this.quantity ../../lang}}{{this.value}}{{/with}}

                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd262c157c97d412fc2cd4d'  operator='=='}}ml{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd262c857c97d412fc2cd4e'  operator='=='}}L{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd262d157c97d412fc2cd4f'  operator='=='}}g{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd262e057c97d412fc2cd50'  operator='=='}}Kg{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd262f157c97d412fc2cd51'  operator='=='}}teaspoon{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd262fc57c97d412fc2cd52'  operator='=='}}tablespoon{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd2634457c97d412fc2cd53'  operator='=='}}cup{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd2635057c97d412fc2cd54'  operator='=='}}bunch{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd2636157c97d412fc2cd55'  operator='=='}}clove{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd2637357c97d412fc2cd56'  operator='=='}}dozen{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd2638657c97d412fc2cd57'  operator='=='}}gallon{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd2639757c97d412fc2cd58'  operator='=='}}loaf{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd263a857c97d412fc2cd59'  operator='=='}}pinch{{/compare}}{{/with}}
                        {{#with this.quantity ../../lang}}{{#compare this.measure_id '4fd263bb57c97d412fc2cd5a'  operator='=='}}slice{{/compare}}{{/with}}
                    </small>
                </li>
            {{/each}}
        </ul>
    {{/each}}
    <h2>{{getTerm i18n 'preparation' lang}}</h2>
    {{#compare images.length 1  operator='>'}}
      </div>
      <div id="viewport">
        <div id="wrapper">
          <div id="scroller">
            {{#each images}}
              <div class="slide">
                <div class="painting" style="background: url(http://opentaste.eu/static/recipes/{{../content._id}}/{{getN this.url 2}});background-size: 100% 100%"></div>
                <!--<img src="http://opentaste.eu/static/recipes/{{../content._id}}/{{getN this.url 2}}" alt="{{getTerm this 'description' ../lang}}" title="{{getTerm this 'description' ../lang}}" class="main-img"/>-->
              </div>
            {{/each}}
          </div>
        </div>
      </div>
      <div id="indicator" style="display:none;">
         <div id="dotty"></div>
      </div>
    <div class="inner recipe-page">
    {{/compare}}
    <ul class="prepare">
      {{#with content.prepare lang}}
        {{#each this}}
            <li>{{{this}}}</li>
        {{/each}}
      {{/with}}
    </ul>
</div>
{{#compare images.length 1  operator='>'}}
  <script src="/js/iscroll.js"></script>
  <script type="text/javascript">
    var myScroll;

    function loaded () {
    	myScroll = new IScroll('#wrapper', {
    		scrollX: true,
    		scrollY: false,
    		momentum: false,
        eventPassthrough: true,
    		snap: true,
    		snapSpeed: 400,
    		keyBindings: true,
    		indicators: {
    			el: document.getElementById('indicator'),
    			resize: false
    		}
    	});
    }

    if(window.addEventListener){
      window.addEventListener('load',loaded,false); //W3C
    }
    else{
      window.attachEvent('onload',loaded); //IE
    }
  </script>
  <style type="text/css">

      #wrapper * {
      	-webkit-box-sizing: border-box;
      	-moz-box-sizing: border-box;
      	box-sizing: border-box;
      }

      html {
      	-ms-touch-action: none;
      }

      #viewport {
      	position: relative;
      	width: 100%;
      	height: 240px;
      	margin: 0 auto;
      	background: #616161;
      	overflow: hidden;
      }

      #wrapper {
      	width: 320px;
      	height: 240px;
      	margin: 0 auto;
      }

      #scroller {
      	position: absolute;
      	z-index: 1;
      	-webkit-tap-highlight-color: rgba(0,0,0,0);
      	width: {{getScrollerSize images.length '320'}}px;
      	height: 240px;
      	-webkit-transform: translateZ(0);
      	-moz-transform: translateZ(0);
      	-ms-transform: translateZ(0);
      	-o-transform: translateZ(0);
      	transform: translateZ(0);
      	-webkit-touch-callout: none;
      	-webkit-user-select: none;
      	-moz-user-select: none;
      	-ms-user-select: none;
      	user-select: none;
      	-webkit-text-size-adjust: none;
      	-moz-text-size-adjust: none;
      	-ms-text-size-adjust: none;
      	-o-text-size-adjust: none;
      	text-size-adjust: none;
      	background-color: #616161;
      }

      .slide {
      	width: 320px;
      	height: 240px;
      	float: left;
      }

      .painting {
      	width: 100%;
        max-width: 90%;
      	height: 200px;
      	border-radius: 3px;
      	margin: 20px auto;
        border: 1px solid #555;
      }

      #indicator {
      	position: relative;
      	width: 110px;
      	height: 20px;
      	margin: 10px auto;
        -webkit-transform: scale(.6);
        -moz-transform: scale(.6);
        transform: scale(.6);
      	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUBAMAAABohZD3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QUGCDYztyDUJgAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAGFBMVEUAAADNzc3Nzc3Nzc3Nzc3Nzc3Nzc3///8aWwwLAAAABnRSTlMAX5Ks3/nRD0HIAAAAAWJLR0QHFmGI6wAAAFtJREFUGFdjYGBgEHYNMWRAAJE0IHCEc5nSwEABxleD8JOgXMY0KBCA8FlgfAcIXwzGT4TwzWD8ZAjfDcZPgfDDYPxU7Hx09ejmoduH7h5096L7B8O/6OGBGl4APYg8TQ0XAScAAAAASUVORK5CYII=);
      }

      #dotty {
      	position: absolute;
      	width: 20px;
      	height: 20px;
      	border-radius: 10px;
      	background: #777;
      }

  </style>
{{/compare}}
